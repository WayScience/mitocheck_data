# Download MitoCheck Mitosis Movies

In this module, we download all timelapse confocal microscopy mitosis movies generated by [MitoCheck](https://www.mitocheck.org/). 
All of the single cell profiles are publicly available and hosted by Open Microscopy.

The files are located at https://idr.openmicroscopy.org/cell/ under accession `idr0013(screenA)`.
The  MitoCheck paper referencing the data is available at https://doi.org/10.1038/nature08869.

## Step 1: Install Aspera

Install Aspera high-speed transfer client as described at https://github.com/IBM/aspera-cli#installation.
We used the direct installation method.

### Step 1a: Allow Aspera to run without password

It is necessary to allow Aspera command line interface (ascp) to run without a password to use it more easily with python.
In order to run ascp without a password do the following:
1) Type sudo visudo at the terminal to open the sudo permissions (sudoers) file
2) Find the line with: `%sudo   ALL=(ALL:ALL) ALL`
3) **Below that line**, insert the following line: `username  ALL=(ALL) NOPASSWD: path_to_aspera`

  Note: `username` is your username and path_to_aspera can be found with `ascli config ascp show`
  
4) Save and exit the editor

## Step 2: Acquire Feature Data

Donwload the [training_set](training_set) dataset

## Step 3: Download Labeled Data with Aspera

Use [Aspera IDR movie downloader](0.download_data/aspera_IDR_downloader.ipynb) to download the raw data that has been labeled by Mitocheck to train the support vector machine described in the [original paper](https://www.nature.com/articles/nature08869#Sec2).
The downloader works in 2 steps:
1) This downloader first determines which wells from which plates have labels (from training data sent by Heriche) and saves these plates/wells to `training_locations.tsv`.
2) Next, the downloader uses these locations to run an Aspera download command and save the [CellH5](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3673213/) file corresponding to each training location.
